---
layout: post
title: "第一个自制c++小游戏：Cyclooctane"
date: 2017-05-11
comments: true
tags: 
	- 游戏
	- c++
---


游戏名：Cyclooctane
副名：Who’s the hunter now?

=============================================

作者：Zedom
平台：Windows
用途：黑框框比赛、C++大作业
语言：C++
代码量：3.6k+
开发时间：30天，2017/04/11->2017/05/10
推荐分辨率：1920*1080
=============================================

## 写在前面的话

2017年4月，院内举办了个黑框框比赛，正好没什么事情做就去报名参加了，这么一来一个月就搭进去了，但收获很大，从黑黑的控制台中稍微抬头看了眼四周。

<!-- more -->

游戏基本创意来自以撒的结合，但还有许多是自己的想法以及和朋友讨论的结果。
之前还未做过上千行的项目，这次算是给自己的锻炼机会，因此所有的地方都自己来做，尽可能用最简单最底层(还是c++)的方法实现。
绘图方面是纯粹调用windows的API，非常麻烦和痛苦，不使用图形库和游戏引擎。
游戏里的基本算法有碰撞检测、A*、快速排序等
游戏整体框架和状态转移用基于虚继承的有限状态机
其它包括基础图形学函数还有一些公式也是自行实现与推演的。
游戏比较简陋，希望各位莫见笑。

## 游戏概述：

陷入黑暗的勇者被迫进行轮回的战斗

### 游戏介绍：

> 房间内每秒都有怪物随机生成，可能出生在地刺上也可能就在玩家身边（距离至少50）
>
> 在房间待一段时间后，玩家将会失去攻击能力，房间随机一处会开门，玩家可以选择停留在房间内，但怪物会继续生成并且速度会随玩家逗留时间增加而增加。（每个房间的时间随机，但总体随闯关房间增加而增加）
>
> 每闯一定数目关卡有升级或切换人物机会
>
> 地形分地刺和岩石，地刺有间歇型地刺和永久型地刺
>
> 怪物分为普通怪物和精英怪物，精英怪物分别可无视地刺、岩石和怪物碰撞体积，速度较普通怪物快（温馨提示：用普通怪物碰撞体积卡住精英怪）
>
> 玩家受伤会无敌并闪烁，无敌时间2s，初始血量固定但不显示即时血量
>
> 为体现游戏恶意，开始游戏时玩家出生点不作判定，出生在岩石上会被弹开，出生在地刺上开局扣血

![mark](http://ot1c7ttzm.bkt.clouddn.com/image/170828/4Gj7EDGCb9.jpg?imageslim)
![mark](http://ot1c7ttzm.bkt.clouddn.com/image/170828/DaLfe1Gc0k.jpg?imageslim)

### 游戏特色：

```
1.自行实现的基础计算机图形学函数
2.未使用第三方图形库、游戏引擎、STL
3.三个主角，6种特色攻击方式
4.无限挑战模式, 狩猎角色变更玩法
5.人物升级、更换系统
6.基于分离轴原理的碰撞检测
7.局部更新绘图
8.利用有限状态机实现的游戏状态转移
9.存读档系统
10.基于游戏特性而作改动的A*寻路算法

```

### 角色介绍：

#### Benzene：（定位：灵活血厚弱攻击型）

普通攻击为发射子弹，对怪物造成1点伤害
大招为立即消灭此时出现的所有怪物并获得旋转地图能力
无法自由切换普通攻击和大招，作为补偿大招无CD
![mark](http://ot1c7ttzm.bkt.clouddn.com/image/170828/eDe0i08J8A.jpg?imageslim)

#### Cyclohexadiene：（定位：缓慢脆皮多功能高杀伤型）

形态一为穿透激光，对直线上怪物造成一点伤害，对怪物有穿透能力
形态二为即死激光，秒杀碰到的怪物，但会因碰到怪物而反射
形态三为旋转地图能力
可自由切换形态
![mark](http://ot1c7ttzm.bkt.clouddn.com/image/170828/AK6hFjcL0A.jpg?imageslim)

#### Pyran：（定位：中规中矩稳健型）

形态一为爆弹，在接触到第一个怪物后爆炸，产生半径75的圆并对其中所有的怪物造成秒杀效果（会伤害自己）
形态二为悬浮，子弹数目恒为一，子弹增大并脱离本体变为可操纵形态，用方向键操控悬浮子弹，对触碰到的怪物造成秒杀效果
可自由切换形态
![mark](http://ot1c7ttzm.bkt.clouddn.com/image/170828/JlEm66Jhal.jpg?imageslim)

### 怪物介绍：

血量以边数进行衡量，最少为三角形，最多为六边形

#### 普通怪物：

速度适中，生命值随机，怪物间存在碰撞体积，受地刺伤害，受岩石阻挡

#### 精英怪物：

速度较普通怪物快
红色精英怪：无视地刺
棕色精英怪：无视岩石
白色精英怪：无视怪物间碰撞体积
![mark](http://ot1c7ttzm.bkt.clouddn.com/image/170828/A6bd0bHAHd.jpg?imageslim)

### 操作方式：

```
WASD：操纵主角移动，移动菜单选项
上下左右：发射子弹、激光或操纵悬浮子弹
Q：使用大招或切换形态
ESC：游戏中暂停、退出升级（没错你可以选择不升级）、返回
Enter：确定

```

涉及数据结构：链表、队列等

涉及算法：快速排序、分离轴原理、A*、有限状态机等

### 展望：

```
1.金钱系统、商店系统、地图系统、成就系统
2.特色道具
3.可攻击的特殊精英怪物、BOSS
4.基于哈希函数的种子
5.分层闯关打BOSS模式
6.用IDA*或D*或导航网格优化寻路

```

## 完整代码

<https://github.com/zedom1/Cyclooctane>